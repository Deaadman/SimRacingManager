@page "/ChampionshipDetails/{ChampionshipGuid:guid}"

@using SimRacingManager.Core
@using SimRacingManager.Data

<MudText Typo="Typo.h5" Align="Align.Center" Class="pb-4">@_newChampionship.Name</MudText>

<MudTable Items="@_newChampionship.Drivers">
    <ToolBarContent>
        <MudText Typo="Typo.h6">Drivers</MudText>
    </ToolBarContent>
    <HeaderContent>
        <MudTh>Name</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Name">@context.Name</MudTd>
    </RowTemplate>
</MudTable>

<br/>

<MudTable Items="@_newChampionship.Tracks">
    <ToolBarContent>
        <MudText Typo="Typo.h6">Tracks</MudText>
    </ToolBarContent>
    <HeaderContent>
        <MudTh>Name</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Name">@context.Name</MudTd>
    </RowTemplate>
</MudTable>

@code {
    [Parameter]
    public Guid ChampionshipGuid { get; set; }
    
    private Championship _newChampionship; // Doesn't matter if this is null, it should always be assigned an instance.

    protected override void OnInitialized()
    {
        foreach (var championship in Championships.ChampionshipsList)
        {
            if (championship.GUID == ChampionshipGuid)
            {
                _newChampionship = championship;
            }
        }
    }
}